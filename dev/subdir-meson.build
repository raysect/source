target_path = {target}

# source files
py_files = {py_files}
pyx_files = {pyx_files}
pxd_files = {pxd_files}
data_files = {data_files}

# compile cython
foreach pyx_file: pyx_files
    py.extension_module(
        fs.replace_suffix(pyx_file, ''),
        pyx_file,
        dependencies: numpy,
        install: true,
        subdir: target_path,
        cython_args: ['--annotate']
    )
endforeach

# add python, pxd and data files to the build
py.install_sources(
    py_files + pxd_files + data_files,
    subdir: target_path
)
